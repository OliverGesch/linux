<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Xenomai: Scheduling management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0-rc3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__cobalt__api__sched.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Scheduling management<div class="ingroups"><a class="el" href="group__cobalt.html">Cobalt</a> &raquo; <a class="el" href="group__cobalt__api.html">POSIX interface</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Cobalt/POSIX scheduling management services.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Scheduling management:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__cobalt__api__sched.png" border="0" alt="" usemap="#group____cobalt____api____sched"/>
<map name="group____cobalt____api____sched" id="group____cobalt____api____sched">
<area shape="rect" id="node2" href="group__cobalt__api.html" title="The Cobalt/POSIX interface is an implementation of a subset of the Single Unix specification over the..." alt="" coords="5,5,123,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga14f50e1f5d815c90f1f4225eca5d3a8c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#ga14f50e1f5d815c90f1f4225eca5d3a8c">pthread_setschedparam</a> (pthread_t thread, int policy, const struct sched_param *param)</td></tr>
<tr class="memdesc:ga14f50e1f5d815c90f1f4225eca5d3a8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the scheduling policy and parameters of the specified thread.  <a href="#ga14f50e1f5d815c90f1f4225eca5d3a8c">More...</a><br /></td></tr>
<tr class="separator:ga14f50e1f5d815c90f1f4225eca5d3a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga405020019f5df8c7e74d30fd457384ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#ga405020019f5df8c7e74d30fd457384ed">pthread_setschedparam_ex</a> (pthread_t thread, int policy, const struct sched_param_ex *param_ex)</td></tr>
<tr class="memdesc:ga405020019f5df8c7e74d30fd457384ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set extended scheduling policy of thread.  <a href="#ga405020019f5df8c7e74d30fd457384ed">More...</a><br /></td></tr>
<tr class="separator:ga405020019f5df8c7e74d30fd457384ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba7a0ffdaef0319289011e8057c7b242"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#gaba7a0ffdaef0319289011e8057c7b242">pthread_getschedparam</a> (pthread_t thread, int *__restrict__ policy, struct sched_param *__restrict__ param)</td></tr>
<tr class="memdesc:gaba7a0ffdaef0319289011e8057c7b242"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the scheduling policy and parameters of the specified thread.  <a href="#gaba7a0ffdaef0319289011e8057c7b242">More...</a><br /></td></tr>
<tr class="separator:gaba7a0ffdaef0319289011e8057c7b242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga889551a09dbb57727ea733dd79cc2e36"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#ga889551a09dbb57727ea733dd79cc2e36">pthread_getschedparam_ex</a> (pthread_t thread, int *__restrict__ policy_r, struct sched_param_ex *__restrict__ param_ex)</td></tr>
<tr class="memdesc:ga889551a09dbb57727ea733dd79cc2e36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get extended scheduling policy of thread.  <a href="#ga889551a09dbb57727ea733dd79cc2e36">More...</a><br /></td></tr>
<tr class="separator:ga889551a09dbb57727ea733dd79cc2e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga357cd4b34c13011749dfffb42b489f09"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#ga357cd4b34c13011749dfffb42b489f09">sched_yield</a> (void)</td></tr>
<tr class="memdesc:ga357cd4b34c13011749dfffb42b489f09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yield the processor.  <a href="#ga357cd4b34c13011749dfffb42b489f09">More...</a><br /></td></tr>
<tr class="separator:ga357cd4b34c13011749dfffb42b489f09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf1f370fc36ea6b22ed42b5ee3cf82a81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#gaf1f370fc36ea6b22ed42b5ee3cf82a81">sched_get_priority_min</a> (int policy)</td></tr>
<tr class="memdesc:gaf1f370fc36ea6b22ed42b5ee3cf82a81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get minimum priority of the specified scheduling policy.  <a href="#gaf1f370fc36ea6b22ed42b5ee3cf82a81">More...</a><br /></td></tr>
<tr class="separator:gaf1f370fc36ea6b22ed42b5ee3cf82a81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaedf5ce0e477326768169871820b55803"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#gaedf5ce0e477326768169871820b55803">sched_get_priority_min_ex</a> (int policy)</td></tr>
<tr class="memdesc:gaedf5ce0e477326768169871820b55803"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get extended minimum priority of the specified scheduling policy.  <a href="#gaedf5ce0e477326768169871820b55803">More...</a><br /></td></tr>
<tr class="separator:gaedf5ce0e477326768169871820b55803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafaebd1698caeb9b9b9e614ad84edd609"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#gafaebd1698caeb9b9b9e614ad84edd609">sched_get_priority_max</a> (int policy)</td></tr>
<tr class="memdesc:gafaebd1698caeb9b9b9e614ad84edd609"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get maximum priority of the specified scheduling policy.  <a href="#gafaebd1698caeb9b9b9e614ad84edd609">More...</a><br /></td></tr>
<tr class="separator:gafaebd1698caeb9b9b9e614ad84edd609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c0013a8287235927971215d7fefa9c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#ga4c0013a8287235927971215d7fefa9c6">sched_get_priority_max_ex</a> (int policy)</td></tr>
<tr class="memdesc:ga4c0013a8287235927971215d7fefa9c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get extended maximum priority of the specified scheduling policy.  <a href="#ga4c0013a8287235927971215d7fefa9c6">More...</a><br /></td></tr>
<tr class="separator:ga4c0013a8287235927971215d7fefa9c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeff2e6e14c407e3d02076ecae842bcca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#gaeff2e6e14c407e3d02076ecae842bcca">pthread_yield</a> (void)</td></tr>
<tr class="memdesc:gaeff2e6e14c407e3d02076ecae842bcca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yield the processor.  <a href="#gaeff2e6e14c407e3d02076ecae842bcca">More...</a><br /></td></tr>
<tr class="separator:gaeff2e6e14c407e3d02076ecae842bcca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b8b3902421f04d35369423ebc059d74"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#ga0b8b3902421f04d35369423ebc059d74">sched_setconfig_np</a> (int cpu, int policy, const union sched_config *config, size_t len)</td></tr>
<tr class="memdesc:ga0b8b3902421f04d35369423ebc059d74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set CPU-specific scheduler settings for a policy.  <a href="#ga0b8b3902421f04d35369423ebc059d74">More...</a><br /></td></tr>
<tr class="separator:ga0b8b3902421f04d35369423ebc059d74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga216b2f848839dd4a19909e73007ca190"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__api__sched.html#ga216b2f848839dd4a19909e73007ca190">sched_getconfig_np</a> (int cpu, int policy, union sched_config *config, size_t *len_r)</td></tr>
<tr class="memdesc:ga216b2f848839dd4a19909e73007ca190"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve CPU-specific scheduler settings for a policy.  <a href="#ga216b2f848839dd4a19909e73007ca190">More...</a><br /></td></tr>
<tr class="separator:ga216b2f848839dd4a19909e73007ca190"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Cobalt/POSIX scheduling management services. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaba7a0ffdaef0319289011e8057c7b242"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_getschedparam </td>
          <td>(</td>
          <td class="paramtype">pthread_t&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *__restrict__&#160;</td>
          <td class="paramname"><em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sched_param *__restrict__&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the scheduling policy and parameters of the specified thread. </p>
<p>This service returns, at the addresses <em>pol</em> and <em>par</em>, the current scheduling policy and scheduling parameters (i.e. priority) of the Xenomai POSIX skin thread <em>tid</em>. If this service is called from user-space and <em>tid</em> is not the identifier of a Xenomai POSIX skin thread, this service fallback to Linux regular pthread_getschedparam service.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>target thread;</td></tr>
    <tr><td class="paramname">policy</td><td>address where the scheduling policy of <em>tid</em> is stored on success;</td></tr>
    <tr><td class="paramname">param</td><td>address where the scheduling parameters of <em>tid</em> is stored on success.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; </dd>
<dd>
an error number if:<ul>
<li>ESRCH, <em>tid</em> is invalid.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://www.opengroup.org/onlinepubs/000095399/functions/pthread_getschedparam.html">Specification.</a> </dd></dl>

<p>References <a class="el" href="group__cobalt__api__sched.html#ga889551a09dbb57727ea733dd79cc2e36">pthread_getschedparam_ex()</a>.</p>

<p>Referenced by <a class="el" href="group__cobalt__api__sched.html#ga889551a09dbb57727ea733dd79cc2e36">pthread_getschedparam_ex()</a>.</p>

</div>
</div>
<a class="anchor" id="ga889551a09dbb57727ea733dd79cc2e36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_getschedparam_ex </td>
          <td>(</td>
          <td class="paramtype">pthread_t&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *__restrict__&#160;</td>
          <td class="paramname"><em>policy_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sched_param_ex *__restrict__&#160;</td>
          <td class="paramname"><em>param_ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get extended scheduling policy of thread. </p>
<p>This service is an extended version of the regular <a class="el" href="group__cobalt__api__sched.html#gaba7a0ffdaef0319289011e8057c7b242" title="Get the scheduling policy and parameters of the specified thread. ">pthread_getschedparam()</a> service, which also supports Xenomai-specific or additional POSIX scheduling policies, not available with the host Linux environment.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>target thread;</td></tr>
    <tr><td class="paramname">policy_r</td><td>address where the scheduling policy of <em>thread</em> is stored on success;</td></tr>
    <tr><td class="paramname">param_ex</td><td>address where the scheduling parameters of <em>thread</em> are stored on success.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; </dd>
<dd>
an error number if:<ul>
<li>ESRCH, <em>thread</em> is invalid.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://www.opengroup.org/onlinepubs/000095399/functions/pthread_getschedparam.html">Specification.</a> </dd></dl>

<p>References <a class="el" href="group__cobalt__api__sched.html#gaba7a0ffdaef0319289011e8057c7b242">pthread_getschedparam()</a>.</p>

<p>Referenced by <a class="el" href="group__cobalt__api__sched.html#gaba7a0ffdaef0319289011e8057c7b242">pthread_getschedparam()</a>.</p>

</div>
</div>
<a class="anchor" id="ga14f50e1f5d815c90f1f4225eca5d3a8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_setschedparam </td>
          <td>(</td>
          <td class="paramtype">pthread_t&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct sched_param *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the scheduling policy and parameters of the specified thread. </p>
<p>This service set the scheduling policy of the Xenomai POSIX skin thread <em>tid</em> to the value <em>pol</em>, and its scheduling parameters (i.e. its priority) to the value pointed to by <em>par</em>.</p>
<p>When used in user-space, passing the current thread ID as <em>tid</em> argument, this service turns the current thread into a Xenomai POSIX skin thread. If <em>tid</em> is neither the identifier of the current thread nor the identifier of a Xenomai POSIX skin thread this service falls back to the regular <a class="el" href="group__cobalt__api__sched.html#ga14f50e1f5d815c90f1f4225eca5d3a8c" title="Set the scheduling policy and parameters of the specified thread. ">pthread_setschedparam()</a> service, hereby causing the current thread to switch to secondary mode if it is Xenomai thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>target thread;</td></tr>
    <tr><td class="paramname">policy</td><td>scheduling policy, one of SCHED_FIFO, SCHED_RR, SCHED_SPORADIC, SCHED_TP or SCHED_OTHER;</td></tr>
    <tr><td class="paramname">param</td><td>scheduling parameters address.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; </dd>
<dd>
an error number if:<ul>
<li>ESRCH, <em>tid</em> is invalid;</li>
<li>EINVAL, <em>pol</em> or <em>par-&gt;sched_priority</em> is invalid;</li>
<li>EAGAIN, in user-space, insufficient memory exists in the system heap, increase CONFIG_XENO_OPT_SYS_HEAPSZ;</li>
<li>EFAULT, in user-space, <em>par</em> is an invalid address;</li>
<li>EPERM, in user-space, the calling process does not have superuser permissions.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://www.opengroup.org/onlinepubs/000095399/functions/pthread_setschedparam.html">Specification.</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd></dd></dl>
<p>When creating or shadowing a Xenomai thread for the first time in user-space, Xenomai installs a handler for the SIGSHADOW signal. If you had installed a handler before that, it will be automatically called by Xenomai for SIGSHADOW signals that it has not sent.</p>
<p>If, however, you install a signal handler for SIGSHADOW after creating or shadowing the first Xenomai thread, you have to explicitly call the function xeno_sigwinch_handler at the beginning of your signal handler, using its return to know if the signal was in fact an internal signal of Xenomai (in which case it returns 1), or if you should handle the signal (in which case it returns 0). xeno_sigwinch_handler prototype is:</p>
<p><b>int xeno_sigwinch_handler(int sig, siginfo_t *si, void *ctxt);</b></p>
<p>Which means that you should register your handler with sigaction, using the SA_SIGINFO flag, and pass all the arguments you received to xeno_sigwinch_handler. </p>

<p>References <a class="el" href="group__cobalt__api__sched.html#ga405020019f5df8c7e74d30fd457384ed">pthread_setschedparam_ex()</a>.</p>

</div>
</div>
<a class="anchor" id="ga405020019f5df8c7e74d30fd457384ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_setschedparam_ex </td>
          <td>(</td>
          <td class="paramtype">pthread_t&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct sched_param_ex *&#160;</td>
          <td class="paramname"><em>param_ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set extended scheduling policy of thread. </p>
<p>This service is an extended version of the regular <a class="el" href="group__cobalt__api__sched.html#ga14f50e1f5d815c90f1f4225eca5d3a8c" title="Set the scheduling policy and parameters of the specified thread. ">pthread_setschedparam()</a> service, which supports Xenomai-specific or additional scheduling policies, not available with the host Linux environment.</p>
<p>This service set the scheduling policy of the Xenomai thread <em>thread</em> to the value <em>policy</em>, and its scheduling parameters (e.g. its priority) to the value pointed to by <em>param_ex</em>.</p>
<p>If <em>thread</em> does not match the identifier of a Xenomai thread, this action falls back to the regular <a class="el" href="group__cobalt__api__sched.html#ga14f50e1f5d815c90f1f4225eca5d3a8c" title="Set the scheduling policy and parameters of the specified thread. ">pthread_setschedparam()</a> service.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>target Cobalt thread;</td></tr>
    <tr><td class="paramname">policy</td><td>scheduling policy, one of SCHED_WEAK, SCHED_FIFO, SCHED_COBALT, SCHED_RR, SCHED_SPORADIC, SCHED_TP, SCHED_QUOTA or SCHED_NORMAL;</td></tr>
    <tr><td class="paramname">param_ex</td><td>scheduling parameters address. As a special exception, a negative sched_priority value is interpreted as if SCHED_WEAK was given in <em>policy</em>, using the absolute value of this parameter as the weak priority level.</td></tr>
  </table>
  </dd>
</dl>
<p>When CONFIG_XENO_OPT_SCHED_WEAK is enabled, SCHED_WEAK exhibits priority levels in the [0..99] range (inclusive). Otherwise, sched_priority must be zero for the SCHED_WEAK policy.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success; </dd>
<dd>
an error number if:<ul>
<li>ESRCH, <em>thread</em> is invalid;</li>
<li>EINVAL, <em>policy</em> or <em>param_ex-&gt;sched_priority</em> is invalid;</li>
<li>EAGAIN, in user-space, insufficient memory exists in the system heap, increase CONFIG_XENO_OPT_SYS_HEAPSZ;</li>
<li>EFAULT, in user-space, <em>param_ex</em> is an invalid address;</li>
<li>EPERM, in user-space, the calling process does not have superuser permissions.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://www.opengroup.org/onlinepubs/000095399/functions/pthread_setschedparam.html">Specification.</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd></dd></dl>
<p>When creating or shadowing a Xenomai thread for the first time in user-space, Xenomai installs a handler for the SIGSHADOW signal. If you had installed a handler before that, it will be automatically called by Xenomai for SIGSHADOW signals that it has not sent.</p>
<p>If, however, you install a signal handler for SIGSHADOW after creating or shadowing the first Xenomai thread, you have to explicitly call the function cobalt_sigshadow_handler at the beginning of your signal handler, using its return to know if the signal was in fact an internal signal of Xenomai (in which case it returns 1), or if you should handle the signal (in which case it returns 0). cobalt_sigshadow_handler prototype is:</p>
<p><b>int cobalt_sigshadow_handler(int sig, struct siginfo *si, void *ctxt);</b></p>
<p>Which means that you should register your handler with sigaction, using the SA_SIGINFO flag, and pass all the arguments you received to cobalt_sigshadow_handler.</p>
<p><a class="el" href="group__cobalt__api__sched.html#ga405020019f5df8c7e74d30fd457384ed" title="Set extended scheduling policy of thread. ">pthread_setschedparam_ex()</a> may switch the caller to secondary mode. </p>

<p>Referenced by <a class="el" href="group__cobalt__api__sched.html#ga14f50e1f5d815c90f1f4225eca5d3a8c">pthread_setschedparam()</a>.</p>

</div>
</div>
<a class="anchor" id="gaeff2e6e14c407e3d02076ecae842bcca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yield the processor. </p>
<p>This function move the current thread at the end of its priority group.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://www.opengroup.org/onlinepubs/000095399/functions/sched_yield.html">Specification.</a> </dd></dl>

<p>References <a class="el" href="group__cobalt__api__sched.html#ga357cd4b34c13011749dfffb42b489f09">sched_yield()</a>.</p>

</div>
</div>
<a class="anchor" id="gafaebd1698caeb9b9b9e614ad84edd609"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sched_get_priority_max </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>policy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get maximum priority of the specified scheduling policy. </p>
<p>This service returns the maximum priority of the scheduling policy <em>policy</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">policy</td><td>scheduling policy.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success; </td></tr>
    <tr><td class="paramname">-1</td><td>with <em>errno</em> set if:<ul>
<li>EINVAL, <em>policy</em> is invalid.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://www.opengroup.org/onlinepubs/000095399/functions/sched_get_priority_max.html">Specification.</a> </dd></dl>

<p>Referenced by <a class="el" href="group__cobalt__api__sched.html#ga4c0013a8287235927971215d7fefa9c6">sched_get_priority_max_ex()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4c0013a8287235927971215d7fefa9c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sched_get_priority_max_ex </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>policy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get extended maximum priority of the specified scheduling policy. </p>
<p>This service returns the maximum priority of the scheduling policy <em>policy</em>, reflecting any Cobalt extension to standard classes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">policy</td><td>scheduling policy.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success; </td></tr>
    <tr><td class="paramname">-1</td><td>with <em>errno</em> set if:<ul>
<li>EINVAL, <em>policy</em> is invalid.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://www.opengroup.org/onlinepubs/000095399/functions/sched_get_priority_max.html">Specification.</a> </dd></dl>

<p>References <a class="el" href="group__cobalt__api__sched.html#gafaebd1698caeb9b9b9e614ad84edd609">sched_get_priority_max()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf1f370fc36ea6b22ed42b5ee3cf82a81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sched_get_priority_min </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>policy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get minimum priority of the specified scheduling policy. </p>
<p>This service returns the minimum priority of the scheduling policy <em>policy</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">policy</td><td>scheduling policy.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success; </td></tr>
    <tr><td class="paramname">-1</td><td>with <em>errno</em> set if:<ul>
<li>EINVAL, <em>policy</em> is invalid.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://www.opengroup.org/onlinepubs/000095399/functions/sched_get_priority_min.html">Specification.</a> </dd></dl>

<p>Referenced by <a class="el" href="group__cobalt__api__sched.html#gaedf5ce0e477326768169871820b55803">sched_get_priority_min_ex()</a>.</p>

</div>
</div>
<a class="anchor" id="gaedf5ce0e477326768169871820b55803"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sched_get_priority_min_ex </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>policy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get extended minimum priority of the specified scheduling policy. </p>
<p>This service returns the minimum priority of the scheduling policy <em>policy</em>, reflecting any Cobalt extension to the standard classes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">policy</td><td>scheduling policy.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success; </td></tr>
    <tr><td class="paramname">-1</td><td>with <em>errno</em> set if:<ul>
<li>EINVAL, <em>policy</em> is invalid.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://www.opengroup.org/onlinepubs/000095399/functions/sched_get_priority_min.html">Specification.</a> </dd></dl>

<p>References <a class="el" href="group__cobalt__api__sched.html#gaf1f370fc36ea6b22ed42b5ee3cf82a81">sched_get_priority_min()</a>.</p>

</div>
</div>
<a class="anchor" id="ga216b2f848839dd4a19909e73007ca190"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t sched_getconfig_np </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union sched_config *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>len_r</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve CPU-specific scheduler settings for a policy. </p>
<p>A configuration is strictly local to the target <em>cpu</em>, and may differ from other processors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cpu</td><td>processor to retrieve the configuration of.</td></tr>
    <tr><td class="paramname">policy</td><td>scheduling policy to which the configuration data applies. Currently, only SCHED_TP and SCHED_QUOTA are valid input.</td></tr>
    <tr><td class="paramname">config</td><td>a pointer to a memory area which receives the configuration settings upon success of this call.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>SCHED_TP specifics</dt><dd></dd></dl>
<p>On successful return, config-&gt;quota.tp contains the TP schedule active on <em>cpu</em>.</p>
<dl class="section user"><dt>SCHED_QUOTA specifics</dt><dd></dd></dl>
<p>On entry, config-&gt;quota.get.tgid must contain the thread group identifier to inquire about.</p>
<p>On successful exit, config-&gt;quota.info contains the information related to the thread group referenced to by config-&gt;quota.get.tgid.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">len_r</td><td>a pointer to a variable for collecting the overall length of the configuration data returned (in bytes). This variable must contain the amount of space available in <em>config</em> when the request is issued.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes copied to <em>config</em> on success; </dd>
<dd>
a negative error number if:</dd></dl>
<ul>
<li>EINVAL, <em>cpu</em> is invalid, or <em>policy</em> is unsupported by the current kernel configuration, or <em>len</em> cannot hold the retrieved configuration data.</li>
<li>ESRCH, with <em>policy</em> equal to SCHED_QUOTA, if the group identifier required to perform the operation is not valid (i.e. config-&gt;quota.get.tgid is invalid).</li>
<li>ENOMEM, lack of memory to perform the operation.</li>
<li>ENOSPC, <em>len</em> is too short. </li>
</ul>

</div>
</div>
<a class="anchor" id="ga0b8b3902421f04d35369423ebc059d74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sched_setconfig_np </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union sched_config *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set CPU-specific scheduler settings for a policy. </p>
<p>A configuration is strictly local to the target <em>cpu</em>, and may differ from other processors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cpu</td><td>processor to load the configuration of.</td></tr>
    <tr><td class="paramname">policy</td><td>scheduling policy to which the configuration data applies. Currently, SCHED_TP and SCHED_QUOTA are valid.</td></tr>
    <tr><td class="paramname">config</td><td>a pointer to the configuration data to load on <em>cpu</em>, applicable to <em>policy</em>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Settings applicable to SCHED_TP</dt><dd></dd></dl>
<p>This call installs the temporal partitions for <em>cpu</em>.</p>
<ul>
<li>config.tp.windows should be a non-null set of time windows, defining the scheduling time slots for <em>cpu</em>. Each window defines its offset from the start of the global time frame (windows[].offset), a duration (windows[].duration), and the partition id it applies to (windows[].ptid).</li>
</ul>
<p>Time windows must be strictly contiguous, i.e. windows[n].offset + windows[n].duration shall equal windows[n + 1].offset. If windows[].ptid is in the range [0..CONFIG_XENO_OPT_SCHED_TP_NRPART-1], SCHED_TP threads which belong to the partition being referred to may run for the duration of the time window.</p>
<p>Time holes may be defined using windows assigned to the pseudo partition #-1, during which no SCHED_TP threads may be scheduled.</p>
<ul>
<li>config.tp.nr_windows should define the number of elements present in the config.tp.windows[] array.</li>
</ul>
<p><em>info</em> is ignored for this request.</p>
<dl class="section user"><dt>Settings applicable to SCHED_QUOTA</dt><dd></dd></dl>
<p>This call manages thread groups running on <em>cpu</em>.</p>
<ul>
<li>config.quota.op should define the operation to be carried out. Valid operations are:<ul>
<li>sched_quota_add for creating a new thread group on <em>cpu</em>. The new group identifier will be written back to info.tgid upon success. A new group is given no initial runtime budget when created. sched_quota_set should be issued to enable it.</li>
<li>sched_quota_remove for deleting a thread group on <em>cpu</em>. The group identifier should be passed in config.quota.remove.tgid.</li>
<li>sched_quota_set for updating the scheduling parameters of a thread group defined on <em>cpu</em>. The group identifier should be passed in config.quota.set.tgid, along with the allotted percentage of the quota interval (config.quota.set.quota), and the peak percentage allowed (config.quota.set.quota_peak).</li>
</ul>
</li>
</ul>
<p>All three operations fill in the <em>config.info</em> structure with the information reflecting the state of the scheduler on <em>cpu</em> with respect to <em>policy</em>, after the requested changes have been applied.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">len</td><td>overall length of the configuration data (in bytes).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; </dd>
<dd>
an error number if:</dd></dl>
<ul>
<li>EINVAL, <em>cpu</em> is invalid, or <em>policy</em> is unsupported by the current kernel configuration, <em>len</em> is invalid, or <em>config</em> contains invalid parameters.</li>
<li>ENOMEM, lack of memory to perform the operation.</li>
<li>EBUSY, with <em>policy</em> equal to SCHED_QUOTA, if an attempt is made to remove a thread group which still manages threads.</li>
<li>ESRCH, with <em>policy</em> equal to SCHED_QUOTA, if the group identifier required to perform the operation is not valid. </li>
</ul>

</div>
</div>
<a class="anchor" id="ga357cd4b34c13011749dfffb42b489f09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sched_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yield the processor. </p>
<p>This function move the current thread at the end of its priority group.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://www.opengroup.org/onlinepubs/000095399/functions/sched_yield.html">Specification.</a> </dd></dl>

<p>References <a class="el" href="group__cobalt__core__thread__states.html#gadf5508cd88c2678ae01dfaf5570c661c">XNRELAX</a>, and <a class="el" href="group__cobalt__core__thread__states.html#gae7835ab0a2123b72a6818c6ea3923ba0">XNWEAK</a>.</p>

<p>Referenced by <a class="el" href="group__cobalt__api__sched.html#gaeff2e6e14c407e3d02076ecae842bcca">pthread_yield()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
